;Attempt to fix flamethrower item button being a physbox (blockking grenades), not sure why the mapper/porter didn't use a func_button.
filter:
{
	"classname" "func_physbox_multiplayer"
	"targetname" "physbox"
}

add:
{
	"model" "*236"
	"wait" "0"
	"unlocked_sound" "0" 
	"unlocked_sentence" "0"
	"targetname" "firegun_button"
	"speed" "5"
	"spawnflags" "17409"
	"sounds" "0"
	"rendermode" "0"
	"renderfx" "0"
	"rendercolor" "255 255 255"
	"renderamt" "255"
	"parentname" "firegun"
	"origin" "1880 1536.01 341.91"
	"movedir" "0 0 0"
	"locked_sound" "0"
	"locked_sentence" "0"
	"lip" "0"
	"health" "0"
	"fadescale" "1"
	"fademindist" "-1"
	"disablereceiveshadows" "0"
	"classname" "func_button"
	
	"OnPressed" "firegun_filter,TestActivator,,0,-1"
}

add:
{
	"classname" "filter_activator_name"
	"targetname" "firegun_filter"
	"filtername" "firegun_user"
	"Negated" "0"
	
	"OnPass" "lanza_cCompare0-1"
}

modify:
{
	match:
	{
		"classname" "weapon_elite"
		"targetname" "firegun"
	}
	insert:
	{
		"OnPlayerPickup" "!activator,AddOutput,targetname firegun_user,0,-1"
	}
}

;Cheap fix to hopefully force doors to be open instead of locking out the escape.
modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "p_46c"
	}
	insert:
	{
		"OnFullyOpen" "p_50,Open,,0.00,1"
		"OnFullyOpen" "p_50,Lock,,0.02,1"
		"OnFullyOpen" "p_49,Open,,0.00,1"
		"OnFullyOpen" "p_49,Lock,,0.02,1"
		"OnFullyOpen" "door_zom_shut2,Kill,,0.00,1"
	}
}

;Block off a spot where players could get stuck
add:
{
	"classname" "func_brush"
	"origin" "-3055.5 6627.5 -1324"
	"angles" "0 0 0"
	"model" "*232"
	"rendermode" "10"
}

;uncommented??
add:
{
	"targetname" "FireParent"
	"parentname" "firegun"
	"origin" "2117.8 1523.01 330"
	"start_active" "0"
	"effect_name" "explosion_basic"
	"classname" "info_particle_system"
}

add:
{
	"targetname" "FireParent2"
	"classname" "logic_measure_movement"
	"MeasureReference" "FireParent"
	"MeasureType" "0"
	"MeasureTarget" "FireParent"
	"Target" "flquem"
	"TargetReference" "FireParent"
	"TargetScale" "1"
}

modify:
{
	match:
	{
		"classname" "trigger_hurt"
		"targetname" "flquem"
	}
	delete:
	{
		"OnStartTouch" "!activatorIgniteLifetime10-1"
		"OnStartTouch" "speedmodModifyspeed0.80-1"
		"OnStartTouch" "speedmodModifyspeed11-1"
		"parentname" "firegun"
	}
	replace:
	{
		"damage" "10"
	}
	insert:
	{
		"OnHurtPlayer" "!activatorIgniteLifetime40-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() - 1).tostring(), 0.0, null, null); }0-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() + 1).tostring(), 0.0, null, null); }0.02-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() - 1).tostring(), 0.0, null, null); }1-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() + 1).tostring(), 0.0, null, null); }1.02-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() - 1).tostring(), 0.0, null, null); }2-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() + 1).tostring(), 0.0, null, null); }2.02-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() - 1).tostring(), 0.0, null, null); }3-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() + 1).tostring(), 0.0, null, null); }3.02-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() - 1).tostring(), 0.0, null, null); }4-1"
		"OnHurtPlayer" "!activatorRunScriptCodeforeach(v,_ in {SetHealth=0}) { EntFireByHandle(self, v, (self.GetHealth() + 1).tostring(), 0.0, null, null); }4.02-1"
	}
}

modify:
{
	match:
	{
		"classname" "trigger_push"
		"targetname" "eli_04"
	}
	insert:
	{
		"OnStartTouch" "!activatorRunScriptCodeself.SetOrigin(self.GetOrigin() + Vector(0, 0, 2))0-1"
	}
}

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "m_3"
	}
	replace:
	{
		"blockdamage" "99999"
	}
}

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "m_4"
	}
	replace:
	{
		"blockdamage" "99999"
	}
}

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "m_5"
	}
	replace:
	{
		"blockdamage" "99999"
	}
}

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "m_6"
	}
	replace:
	{
		"blockdamage" "99999"
	}
}

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "a_1"
	}
	replace:
	{
		"blockdamage" "99999"
	}
}
